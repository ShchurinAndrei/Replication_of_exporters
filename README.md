# Тиражирование node/postgres/sql exporter-ов
Скрипт для тиражирования, первичной настройки и запуска node/postgres/sql exporter-ов.
Благодаря нему можно так же отслеживать в каком статусе сейчас находятся экспортеры и перезапускать их.

main_prometheus.py - файл для запуска, если тиражирование и запуск экспортеров требуется из под уз prometheus;
main_local_user.py - файл для запуска,  если тиражирование и запуск экспортеров требуется из под той же уз, под которой подключаемся к хосту;
etalon_check_exporter - bash-скрипт размещающийся вместе с отстальными экспортерами, его задача проверять работают ли экспортеры и если нет запускать их

host_user.txt - файл где прописываются хосты для тиражирования, пользователи для подключения к хостам и имена БД (host, user, db_name). Переменные записываются через табуляцию, закомментированные (#) и пустые строки будут пропускаться;

etalon_env -  файл конфигурации запуска postgres_exporter. 

etalon_env_s -  файл конфигурации запуска sql_exporter

В них прописывается строка подключения к БД (хост и БД подбирается из host_user.txt, а пользователь и пароль для подключения к БД прописывается в этом файле), прописывается путь до файла запуска экспортера (сейчас настроен для запуска из под той же уз, под которой подключаемся к хосту);

etalon_sql_exporter.yml - конфигурационный файл для sql_exporter, в котором прописывается строка подключения к БД.
etalon_check_exporter - файл с bash-скриптом, по крону раз в минуту он проверяет включены ли node, postgres и sql экспортеры и если нет, то пытается запустить их и пишет об этом лог.
